#!/bin/bash

if [ "$0" = "$BASH_SOURCE" ] ; then echo "Usage : source ${BASH_SOURCE[0]}" ; exit 1 ; fi

# Old build system (configure)
# Don't define _DEBUG
# interpreter/platform/unix/PlatformDefinitions.h:123:9: warning: '_DEBUG' macro redefined
export CFLAGS="-g -O0 -fno-inline -DDEBUG $CFLAGS"
export CPPFLAGS="-DDEBUG $CPPFLAGS"
export CXXFLAGS="-g -O0 -fno-inline -DDEBUG $CXXFLAGS"

# New build system (cmake)
export CMAKE_BUILD_TYPE=Debug

# Activate code to trace the semaphores
# Pfff... CPPFLAGS ignored by cmake ???
export CPPFLAGS="-DCONCURRENCY_DEBUG $CPPFLAGS"
export CXXFLAGS="-DCONCURRENCY_DEBUG $CXXFLAGS"
